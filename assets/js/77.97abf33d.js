(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{388:function(t,s){t.exports="data:image/png;base64,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"},773:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_7-8-error接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-8-error接口"}},[t._v("#")]),t._v(" 7.8. error接口")]),t._v(" "),s("p",[t._v("从本书的开始，我们就已经创建和使用过神秘的预定义error类型，而且没有解释它究竟是什么。实际上它就是interface类型，这个类型有一个返回错误信息的单一方法：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("创建一个error最简单的方法就是调用errors.New函数，它会根据传入的错误信息返回一个新的error。整个errors包仅只有4行：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" errors\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("errorString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" errorString "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("errorString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("承载errorString的类型是一个结构体而非一个字符串，这是为了保护它表示的错误避免粗心（或有意）的更新。并且因为是指针类型"),s("code",[t._v("*errorString")]),t._v("满足error接口而非errorString类型，所以每个New函数的调用都分配了一个独特的和其他错误不相同的实例。我们也不想要重要的error例如io.EOF和一个刚好有相同错误消息的error比较后相等。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EOF"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EOF"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "false"')]),t._v("\n")])])]),s("p",[t._v("调用errors.New函数是非常稀少的，因为有一个方便的封装函数fmt.Errorf，它还会处理字符串格式化。我们曾多次在第5章中用到它。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" fmt\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errors"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("format "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("虽然"),s("code",[t._v("*errorString")]),t._v("可能是最简单的错误类型，但远非只有它一个。例如，syscall包提供了Go语言底层系统调用API。在多个平台上，它定义一个实现error接口的数字类型Errno，并且在Unix平台上，Errno的Error方法会从一个字符串表中查找错误消息，如下面展示的这样：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" syscall\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Errno "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uintptr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// operating system error code")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" errors "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"operation not permitted"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// EPERM")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no such file or directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ENOENT")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no such process"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ESRCH")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e Errno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errno %d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("下面的语句创建了一个持有Errno值为2的接口值，表示POSIX ENOENT状况：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" syscall"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errno")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "no such file or directory"')]),t._v("\nfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "no such file or directory"')]),t._v("\n")])])]),s("p",[t._v("err的值图形化的呈现在图7.6中。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(388),alt:""}})]),t._v(" "),s("p",[t._v("Errno是一个系统调用错误的高效表示方式，它通过一个有限的集合进行描述，并且它满足标准的错误接口。我们会在第7.11节了解到其它满足这个接口的类型。")])])}),[],!1,null,null,null);s.default=r.exports}}]);